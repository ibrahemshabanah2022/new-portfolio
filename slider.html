<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Responsive Slider</title>

    <style>
      :root {
        /* Default (Desktop) Variables */
        --card-width: 200px;
        --card-height: 300px;
        --card-gap: 20px; /* Gap between stacked cards */
        --card-start-x: 50%; /* Horizontal starting position of stack */
        --card-start-y: 50%; /* Vertical position */

        /* Content positioning */
        --content-left: 10%;
        --content-width: 30vw;
        --content-top: 50%;
        --content-transform: translateY(-50%);
        --content-align: left;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        height: 100vh;
        display: grid;
        place-items: center;
        overflow: hidden;
        background: #000;
        font-family: helvetica, sans-serif;
      }

      main {
        position: relative;
        width: 100%;
        height: 100%;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
      }

      .slider {
        position: relative;
        width: 100%;
        height: 100%;
      }

      .item {
        width: var(--card-width);
        height: var(--card-height);
        list-style: none;
        position: absolute;
        top: var(--card-start-y);
        transform: translateY(-50%);
        z-index: 1;
        background-position: center;
        background-size: cover;
        border-radius: 20px;
        box-shadow: 0 20px 30px rgba(255, 255, 255, 0.3) inset;
        transition: transform 0.1s, left 0.75s, top 0.75s, width 0.75s,
          height 0.75s;
      }

      /* Active Slide (Background) */
      .item:nth-child(1),
      .item:nth-child(2) {
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        transform: none;
        border-radius: 0;
        box-shadow: none;
        z-index: 0;
      }

      /* Stacked Cards Logic using CSS Calc and Variables */
      .item:nth-child(3) {
        left: var(--card-start-x);
      }
      .item:nth-child(4) {
        left: calc(var(--card-start-x) + (var(--card-width) + var(--card-gap)));
      }
      .item:nth-child(5) {
        left: calc(
          var(--card-start-x) + (var(--card-width) + var(--card-gap)) * 2
        );
      }
      .item:nth-child(6) {
        left: calc(
          var(--card-start-x) + (var(--card-width) + var(--card-gap)) * 3
        );
        opacity: 0;
      }

      /* Text Content */
      .content {
        width: var(--content-width);
        position: absolute;
        top: var(--content-top);
        left: var(--content-left);
        transform: var(--content-transform);
        text-align: var(--content-align);
        color: white;
        text-shadow: 0 3px 8px rgba(0, 0, 0, 0.5);
        opacity: 0;
        display: none;
        /* Add a subtle gradient behind text for readability on bright images */
        background: radial-gradient(rgba(0, 0, 0, 0.3), transparent 70%);
        padding: 20px;
        border-radius: 10px;
      }

      .content .title {
        font-family: "Arial Black", sans-serif;
        text-transform: uppercase;
        font-size: clamp(1.5rem, 5vw, 3rem); /* Responsive font size */
      }

      .content .description {
        line-height: 1.7;
        margin: 1rem 0 1.5rem;
        font-size: clamp(0.8rem, 2vw, 1rem);
      }

      .content button {
        background: rgba(0, 0, 0, 0.2);
        color: #fff;
        border: 2px solid #fff;
        padding: 0.75rem 1.5rem;
        cursor: pointer;
        font-size: 1rem;
        transition: 0.3s;
      }

      .content button:hover {
        background: white;
        color: black;
      }

      .item:nth-of-type(2) .content {
        display: block;
        animation: show 0.75s ease-in-out 0.3s forwards;
      }

      @keyframes show {
        from {
          opacity: 0;
          filter: blur(5px);
          transform: translateY(calc(-50% + 75px));
        }
        to {
          opacity: 1;
          filter: blur(0);
        }
      }

      .nav {
        position: absolute;
        bottom: 2rem;
        left: 50%;
        transform: translateX(-50%);
        z-index: 10;
        user-select: none;
      }

      .nav .btn {
        background: rgba(255, 255, 255, 0.6);
        color: rgba(0, 0, 0, 0.7);
        border-radius: 50%;
        padding: 1rem; /* Larger touch area */
        cursor: pointer;
        margin: 0 10px;
        transition: 0.3s;
      }

      .nav .btn:hover {
        background: rgba(255, 255, 255, 1);
        color: black;
      }

      /* --- MEDIA QUERIES --- */

      /* Tablet / Small Desktop (max-width: 1024px) */
      @media (max-width: 1024px) {
        :root {
          --card-width: 160px;
          --card-height: 240px;
          --content-width: 45vw;
        }
      }

      /* Mobile (max-width: 768px) */
      @media (max-width: 768px) {
        :root {
          /* Move cards down */
          --card-start-y: 75%;
          /* Center the stack horizontally */
          --card-start-x: 50%;
          /* Make cards smaller */
          --card-width: 130px;
          --card-height: 190px;
          --card-gap: 10px;

          /* Move content to top and center it */
          --content-left: 50%;
          --content-transform: translate(-50%, -50%);
          --content-width: 80vw;
          --content-top: 35%;
          --content-align: center;
        }

        .item:nth-child(3) {
          /* On mobile, center the first card of the stack relative to screen */
          left: 50%;
          transform: translate(-50%, -50%);
        }
        .item:nth-child(4) {
          left: calc(50% + var(--card-width) * 0.4);
          transform: translate(-50%, -50%);
          z-index: -1; /* Tuck behind */
        }
        .item:nth-child(5) {
          left: calc(50% + var(--card-width) * 0.8);
          transform: translate(-50%, -50%);
          z-index: -2;
        }
        .item:nth-child(6) {
          left: calc(50% + var(--card-width) * 1.2);
          transform: translate(-50%, -50%);
          opacity: 0;
        }

        /* Adjust Animation for mobile centering */
        @keyframes show {
          from {
            opacity: 0;
            filter: blur(5px);
            transform: translate(-50%, calc(-50% + 75px));
          }
          to {
            opacity: 1;
            filter: blur(0);
            transform: translate(-50%, -50%);
          }
        }
      }

      /* Small Mobile (max-width: 480px) */
      @media (max-width: 480px) {
        :root {
          --card-width: 110px;
          --card-height: 160px;
          --content-top: 30%;
        }

        .content .title {
          font-size: 1.5rem;
        }

        .nav {
          bottom: 1rem;
        }

        .nav .btn {
          padding: 0.8rem;
        }
      }
      /* --- 1. The Transition Overlay (The Curtain) --- */
      .transition-curtain {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: #000; /* Color of the transition */
        z-index: 9999; /* On top of everything */
        opacity: 1; /* Start visible (black screen) */
        pointer-events: none; /* Let clicks pass through when hidden */
        transition: opacity 0.8s ease-in-out;
      }

      /* Class to hide the curtain (reveal the page) */
      .transition-curtain.hidden {
        opacity: 0;
      }

      /* --- 2. The Link/Button Style --- */
      .view-btn {
        text-decoration: none;
        font-family: helvetica, sans-serif;
        color: #fff;
        border: 1px solid rgba(255, 255, 255, 0.5);
        padding: 1rem 2rem;
        border-radius: 30px;
        background: rgba(0, 0, 0, 0.3);
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 2px;
        cursor: pointer;

        /* Positioning centering for demo purposes */
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      .view-btn:hover {
        background: #fff;
        color: #000;
        box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
      }
    </style>
  </head>

  <body>
    <div class="transition-curtain"></div>

    <main>
      <ul class="slider">
        <li
          class="item"
          style="
            background-image: url('https://cdn.mos.cms.futurecdn.net/dP3N4qnEZ4tCTCLq59iysd.jpg');
          "
        >
          <div class="content">
            <h2 class="title">Lossless Youths</h2>
            <p class="description">
              Lorem ipsum dolor sit amet consectetur adipisicing elit.
            </p>
            <button>Read More</button>
          </div>
        </li>

        <li
          class="item"
          style="background-image: url('https://i.redd.it/tc0aqpv92pn21.jpg')"
        >
          <div class="content">
            <h2 class="title">Estrange Bond</h2>
            <p class="description">
              Lorem ipsum dolor sit amet consectetur adipisicing elit.
            </p>
            <button>Read More</button>
          </div>
        </li>

        <li
          class="item"
          style="
            background-image: url('https://wharferj.files.wordpress.com/2015/11/bio_north.jpg');
          "
        ></li>
        <li
          class="item"
          style="
            background-image: url('https://images7.alphacoders.com/878/878663.jpg');
          "
        ></li>
        <li
          class="item"
          style="
            background-image: url('https://theawesomer.com/photos/2017/07/simon_stalenhag_the_electric_state_6.jpg');
          "
        ></li>
        <li
          class="item"
          style="
            background-image: url('https://da.se/app/uploads/2015/09/simon-december1994.jpg');
          "
        ></li>
      </ul>

      <nav class="nav">
        <ion-icon class="btn prev" name="arrow-back-outline"></ion-icon>
        <ion-icon class="btn next" name="arrow-forward-outline"></ion-icon>
      </nav>
    </main>

    <script
      type="module"
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
    ></script>

    <script>
      const slider = document.querySelector(".slider");

      document.addEventListener("click", (e) => {
        // Check if the clicked element or its parent has the class 'next' or 'prev'
        const target = e.target;
        const isNext =
          target.classList.contains("next") ||
          target.parentElement.classList.contains("next");
        const isPrev =
          target.classList.contains("prev") ||
          target.parentElement.classList.contains("prev");

        const items = document.querySelectorAll(".item");

        if (isNext) {
          slider.append(items[0]);
        }

        if (isPrev) {
          slider.prepend(items[items.length - 1]);
        }
      });
    </script>
    <script>
      window.onload = () => {
        // 1. Select the curtain
        const curtain = document.querySelector(".transition-curtain");
        const anchors = document.querySelectorAll(".transition-link");

        // 2. Reveal the page (Fade out the black curtain)
        setTimeout(() => {
          if (curtain) curtain.classList.add("hidden");
        }, 100); // Small delay to ensure smooth rendering

        // 3. Intercept Link Clicks
        anchors.forEach((anchor) => {
          anchor.addEventListener("click", function (e) {
            e.preventDefault(); // Stop immediate navigation
            const target = this.href; // Get the destination

            // Fade the curtain back in (Screen goes black)
            curtain.classList.remove("hidden");

            // Wait for animation to finish, then go to page
            setTimeout(() => {
              window.location.href = target;
            }, 800); // Must match CSS transition time (0.8s)
          });
        });
      };
    </script>
    <script>
      // 2. ADD THIS SCRIPT TO HANDLE THE FADE IN
      window.addEventListener("load", () => {
        const curtain = document.querySelector(".transition-curtain");
        setTimeout(() => {
          curtain.classList.add("hidden");
        }, 100);
      });

      // Your existing Slider Logic
      const sliders = document.querySelector(".slider");
      document.addEventListener("click", (e) => {
        // ... existing slider logic ...
      });
    </script>
  </body>
</html>
